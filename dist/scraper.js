// Generated by CoffeeScript 2.1.1
(function() {
  var Nightmare, extractor, nightmare, scrap;

  Nightmare = require('nightmare');

  nightmare = Nightmare({
    show: false,
    webPreferences: {
      partition: 'nopersist'
    }
  });

  extractor = require('./extractor');

  scrap = async function(code) {
    var e, scraping;
    try {
      scraping = (await nightmare.viewport(1024, 768).goto('https://kai.id/index.php/home').click('#accordion .accordion-toggle:nth-child(3) h6').wait(1000).insert('#kode_booking', code).wait(1500).click('#submitcode').wait(3000).evaluate(function() {
        var getEl;
        getEl = document.querySelector('#data-input');
        if (getEl === null) {
          return null;
        }
        return getEl.innerHTML;
      }).end());
      if (scraping === null) {
        console.log('data Not found');
        process.exit(1);
      }
      return scraping;
    } catch (error) {
      e = error;
      console.log(e);
    }
  };

  module.exports = scrap;

}).call(this);
